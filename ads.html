<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AdDev Studio | Live Ads</title>

  <style>
    :root {
      --bg-main: #020617;
      --bg-card: #0b1220;
      --accent: #f97316;
      --primary: #2563eb;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --radius: 18px;
      --shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 55%);
      color: var(--text-main);
    }
    a { text-decoration: none; color: inherit; }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(2,6,23,0.96);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(15, 23, 42, 0.9);
    }
    .nav-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .brand {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: #e5e7eb;
    }
    .brand-mark {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 0,#60a5fa,#1d4ed8);
      color: #eff6ff;
      font-size: 16px;
      font-weight: 700;
      box-shadow: 0 10px 25px rgba(15,23,42,0.75);
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 13px;
    }
    .nav-links a {
      color: #9ca3af;
      padding: 6px 10px;
      border-radius: 999px;
    }
    .nav-links a.active {
      background: var(--accent);
      color: #111827;
      font-weight: 600;
      box-shadow: 0 12px 28px rgba(249,115,22,0.55);
    }
    .nav-links a:hover {
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
    }

    main {
      max-width: 1120px;
      margin: 0 auto;
      padding: 22px 16px 60px;
    }

    /* HERO */
    .hero {
      margin-top: 18px;
      margin-bottom: 26px;
      padding: 20px 18px;
      border-radius: 22px;
      background: linear-gradient(135deg,#6b46ff,#8d6bff);
      color: #f9fafb;
      box-shadow: 0 25px 60px rgba(107,70,255,0.45);
      display: grid;
      gap: 16px;
    }
    .hero h1 {
      margin: 0 0 8px;
      font-size: 22px;
    }
    .hero p {
      margin: 0;
      font-size: 14px;
    }
    .hero-badges {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 11px;
    }
    .hero-badges span {
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15,23,42,0.2);
      border: 1px solid rgba(248,250,252,0.35);
    }
    .hero-actions {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 13px;
    }
    .btn-white {
      padding: 9px 16px;
      border-radius: 999px;
      background: #f9fafb;
      color: #4b2fff;
      font-weight: 600;
      box-shadow: 0 14px 30px rgba(248,250,252,0.6);
    }
    .btn-outline {
      padding: 9px 16px;
      border-radius: 999px;
      border: 1px solid rgba(248,250,252,0.6);
      background: transparent;
      color: #f9fafb;
    }

    /* SECTION HEADER & FILTERS */
    .section-header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 16px;
    }
    .section-label {
      font-size: 0.78rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #9ca3af;
    }
    .section-title {
      font-size: 1.2rem;
      margin: 0;
    }
    .section-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 18px;
      font-size: 12px;
    }
    .filters input,
    .filters select {
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: #020617;
      color: #e5e7eb;
    }

    /* PRODUCTS GRID */
    .products-grid {
      display: grid;
      gap: 16px;
    }
    @media (min-width: 900px){
      .products-grid { grid-template-columns: repeat(3,minmax(0,1fr)); }
    }

    .product-card {
      background: var(--bg-card);
      border-radius: var(--radius);
      padding: 14px 14px 12px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(148,163,184,0.28);
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 13px;
    }
    .product-image {
      width: 100%;
      height: 150px;
      border-radius: 12px;
      object-fit: cover;
      background: #020617;
    }
    .product-name {
      font-weight: 600;
      margin-top: 4px;
    }
    .product-price {
      font-size: 13px;
      color: #fbbf24;
    }
    .product-price span {
      font-weight: 600;
      color: var(--accent);
    }
    .product-desc {
      font-size: 12px;
      color: var(--text-muted);
      max-height: 46px;
      overflow: hidden;
    }
    .product-actions {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .btn-buy {
      padding: 7px 13px;
      border-radius: 999px;
      background: var(--accent);
      color: #111827;
      font-size: 12px;
      font-weight: 600;
      border: none;
      cursor: pointer;
    }
    .btn-buy:hover {
      filter: brightness(1.05);
    }
    .inline-buttons {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      font-size: 11px;
    }
    .inline-btn {
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
    }

    .status {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 8px;
    }

    /* SHARE MODAL */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }
    .modal {
      background: #020617;
      border-radius: 18px;
      max-width: 420px;
      width: 100%;
      padding: 18px 18px 14px;
      box-shadow: 0 30px 70px rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.5);
      font-size: 14px;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .modal-title {
      font-weight: 600;
      font-size: 15px;
    }
    .modal-close {
      border: none;
      background: transparent;
      color: #9ca3af;
      font-size: 18px;
      cursor: pointer;
    }
    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .share-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .share-btn-full {
      width: 100%;
      text-align: left;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid rgba(148,163,184,0.5);
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    .share-label-main {
      font-weight: 500;
    }
    .share-label-sub {
      font-size: 11px;
      color: #9ca3af;
    }
    .share-icon {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: #1e293b;
      color: #e5e7eb;
    }
  </style>
</head>
<body>

<header>
  <div class="nav-inner">
    <a href="/index.html" class="brand">
      <div class="brand-mark">A</div>
      <span>AdDev Studio</span>
    </a>
    <nav class="nav-links">
      <a href="/index.html">Home</a>
      <a href="/ads.html" class="active">Ads</a>
      <a href="/affiliate.html">Affiliate</a>
      <a href="/blog.html">Blog</a>
      <a href="/resources.html">Resources</a>
      <a href="/contact.html">Contact</a>
    </nav>
  </div>
</header>

<main>

  <!-- HERO -->
  <section class="hero">
    <div>
      <h1>Live product ads powered by Admitad.</h1>
      <p>
        This Ads page automatically loads your Admitad product feed and turns it
        into shareable cards for TikTok, Instagram, Facebook, LinkedIn and more.
      </p>
      <div class="hero-badges">
        <span>Auto-updated offers</span>
        <span>Affiliate-safe tracking</span>
        <span>Social media ready</span>
      </div>
      <div class="hero-actions">
        <a class="btn-white"
           href="https://www.admitad.com/affiliate-publishers/?ref=kaw95ey05k"
           target="_blank">Login to Admitad</a>
        <a class="btn-outline"
           href="https://www.admitad.com/affiliate-publishers/?ref=kaw95ey05k"
           target="_blank">Join as Publisher</a>
      </div>
    </div>
  </section>

  <!-- MAIN SECTION -->
  <section>
    <div class="section-header">
      <div class="section-label">Ads Center</div>
      <h2 class="section-title">Live products from your Admitad feed</h2>
      <p class="section-sub">
        Filter products, open offers, copy affiliate links or share ready-made
        posts to Facebook, WhatsApp, Telegram, TikTok, Instagram, LinkedIn and X.
      </p>
    </div>

    <div class="filters">
      <input id="searchInput" type="text" placeholder="Search productsâ€¦" />
      <select id="priceFilter">
        <option value="all">All prices</option>
        <option value="10">&lt; $10</option>
        <option value="25">$10â€“$25</option>
        <option value="50">$25â€“$50</option>
        <option value="51">&gt; $50</option>
      </select>
    </div>

    <div id="status" class="status">Loading productsâ€¦</div>
    <div id="productsGrid" class="products-grid"></div>
  </section>

</main>

<!-- SHARE MODAL -->
<div id="shareModalBackdrop" class="modal-backdrop">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title" id="shareModalTitle">Share product</div>
      <button class="modal-close" id="modalCloseBtn">&times;</button>
    </div>
    <div class="modal-body">
      <div style="font-size:12px;color:#9ca3af;" id="shareModalDesc"></div>
      <div class="share-row">
        <button class="share-btn-full" data-network="facebook">
          <span class="share-icon">f</span>
          <div>
            <div class="share-label-main">Facebook â€” Share post</div>
            <div class="share-label-sub">Open Facebook share dialog with this product link.</div>
          </div>
        </button>

        <button class="share-btn-full" data-network="whatsapp">
          <span class="share-icon">wa</span>
          <div>
            <div class="share-label-main">WhatsApp â€” Send to chat</div>
            <div class="share-label-sub">Share this deal directly in a chat or group.</div>
          </div>
        </button>

        <button class="share-btn-full" data-network="telegram">
          <span class="share-icon">tg</span>
          <div>
            <div class="share-label-main">Telegram â€” Share in channel</div>
            <div class="share-label-sub">Open Telegram with a prefilled message.</div>
          </div>
        </button>

        <button class="share-btn-full" data-network="twitter">
          <span class="share-icon">X</span>
          <div>
            <div class="share-label-main">X / Twitter â€” Tweet this</div>
            <div class="share-label-sub">Create a tweet with title and product link.</div>
          </div>
        </button>

        <button class="share-btn-full" data-network="linkedin">
          <span class="share-icon">in</span>
          <div>
            <div class="share-label-main">LinkedIn â€” Publish post</div>
            <div class="share-label-sub">Share to your professional network.</div>
          </div>
        </button>

        <button class="share-btn-full" data-network="instagram">
          <span class="share-icon">IG</span>
          <div>
            <div class="share-label-main">Instagram â€” Copy caption</div>
            <div class="share-label-sub">
              Caption + link will be copied. Open Instagram and paste it in your post, bio or story.
            </div>
          </div>
        </button>

        <button class="share-btn-full" data-network="tiktok">
          <span class="share-icon">TT</span>
          <div>
            <div class="share-label-main">TikTok â€” Copy caption</div>
            <div class="share-label-sub">
              Caption + link will be copied. Open TikTok and paste it in your post or bio.
            </div>
          </div>
        </button>

        <button class="share-btn-full" data-network="copy">
          <span class="share-icon">ðŸ”—</span>
          <div>
            <div class="share-label-main">Copy link & caption</div>
            <div class="share-label-sub">
              Use this for any other platform or manual posting.
            </div>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  // KTU vendos API-n e proxy-t tÃ«nd qÃ« kthen XML.
  // Nese e ke ndÃ«rtuar si "proxy" qÃ« thjesht pason XML-in e Admitad-it,
  // mund ta lÃ«sh kÃ«shtu:
  const FEED_URL = "https://api.addev-studio.com/proxy";

  const grid = document.getElementById("productsGrid");
  const statusEl = document.getElementById("status");
  const searchInput = document.getElementById("searchInput");
  const priceFilter = document.getElementById("priceFilter");

  const modalBackdrop = document.getElementById("shareModalBackdrop");
  const modalCloseBtn = document.getElementById("modalCloseBtn");
  const modalTitle = document.getElementById("shareModalTitle");
  const modalDesc = document.getElementById("shareModalDesc");
  const modalButtons = document.querySelectorAll(".share-btn-full");

  let allOffers = [];
  let currentProduct = null;

  async function loadProducts() {
    try {
      statusEl.textContent = "Loading products from Admitadâ€¦";

      const res = await fetch(FEED_URL);
      if (!res.ok) throw new Error("API error");

      const text = await res.text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(text, "text/xml");

      const offers = xml.getElementsByTagName("offer") || [];
      allOffers = Array.from(offers);

      if (!allOffers.length) {
        statusEl.textContent = "No products found in feed.";
      } else {
        statusEl.textContent = "Products loaded. Click Share to promote on social media.";
      }

      renderProducts();
    } catch (err) {
      console.error(err);
      statusEl.textContent = "Could not load products (check proxy / CORS settings).";
    }
  }

  function extractOfferData(o) {
    const getText = (tag) => o.getElementsByTagName(tag)[0]?.textContent || "";
    const name = getText("name") || "Product";
    const img = getText("picture");
    const url = getText("url") || "#";
    const priceStr = getText("price");
    const price = parseFloat(priceStr || "0");
    const curr = getText("currencyId") || "USD";
    const desc = getText("description");
    return { name, img, url, price, curr, desc };
  }

  function renderProducts() {
    const term = searchInput.value.toLowerCase();
    const pf = priceFilter.value;

    const filtered = allOffers.filter((o) => {
      const { name, price } = extractOfferData(o);
      if (term && !name.toLowerCase().includes(term)) return false;
      if (pf !== "all") {
        if (pf === "10" && !(price < 10)) return false;
        if (pf === "25" && !(price >= 10 && price < 25)) return false;
        if (pf === "50" && !(price >= 25 && price <= 50)) return false;
        if (pf === "51" && !(price > 50)) return false;
      }
      return true;
    });

    grid.innerHTML = "";
    filtered.forEach((o) => {
      const { name, img, url, price, curr, desc } = extractOfferData(o);

      const card = document.createElement("article");
      card.className = "product-card";

      const imageEl = document.createElement("img");
      imageEl.className = "product-image";
      if (img) {
        imageEl.src = img;
        imageEl.alt = name;
      } else {
        imageEl.alt = "No image";
      }
      card.appendChild(imageEl);

      const nameEl = document.createElement("div");
      nameEl.className = "product-name";
      nameEl.textContent = name;
      card.appendChild(nameEl);

      const priceEl = document.createElement("div");
      priceEl.className = "product-price";
      priceEl.innerHTML = `Price: <span>${priceStrOrDash(price)}</span> ${curr}`;
      card.appendChild(priceEl);

      const descEl = document.createElement("div");
      descEl.className = "product-desc";
      descEl.textContent = stripHtml(desc);
      card.appendChild(descEl);

      const actions = document.createElement("div");
      actions.className = "product-actions";

      const buyBtn = document.createElement("a");
      buyBtn.className = "btn-buy";
      buyBtn.href = url;
      buyBtn.target = "_blank";
      buyBtn.rel = "noopener noreferrer";
      buyBtn.textContent = "Open offer";
      actions.appendChild(buyBtn);

      const inline = document.createElement("div");
      inline.className = "inline-buttons";

      const copyBtn = document.createElement("button");
      copyBtn.className = "inline-btn";
      copyBtn.textContent = "Copy link";
      copyBtn.addEventListener("click", () => copyLink(url, name));
      inline.appendChild(copyBtn);

      const shareBtn = document.createElement("button");
      shareBtn.className = "inline-btn";
      shareBtn.textContent = "Shareâ€¦";
      shareBtn.addEventListener("click", () => openShareModal({ name, url }));
      inline.appendChild(shareBtn);

      actions.appendChild(inline);
      card.appendChild(actions);

      grid.appendChild(card);
    });

    if (!filtered.length) {
      grid.innerHTML = "<div class='status'>No products match your filters.</div>";
    }
  }

  function priceStrOrDash(price) {
    if (!price || isNaN(price)) return "-";
    return price.toFixed(2);
  }

  function stripHtml(html) {
    if (!html) return "";
    const tmp = document.createElement("div");
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || "";
  }

  async function copyLink(url, name) {
    const caption =
      `${name}\n\n` +
      `ðŸ‘‰ ${url}\n\n` +
      `#affiliate #addevstudio #deals`;

    try {
      await navigator.clipboard.writeText(caption);
      alert("Link + caption copied! Paste it in your social post.");
    } catch (e) {
      console.error(e);
      alert("Could not copy automatically. Manually copy this link: " + url);
    }
  }

  function openShareModal(product) {
    currentProduct = product;
    modalTitle.textContent = "Share: " + (product.name || "Product");
    modalDesc.textContent =
      "Choose where you want to promote this deal. Some networks open a share dialog, " +
      "others copy a caption to your clipboard so you can paste it in your post or bio.";
    modalBackdrop.style.display = "flex";
  }

  function closeShareModal() {
    modalBackdrop.style.display = "none";
    currentProduct = null;
  }

  function openWindow(url) {
    window.open(url, "_blank", "noopener,noreferrer");
  }

  async function handleShare(network) {
    if (!currentProduct) return;
    const { name, url } = currentProduct;
    const baseCaption =
      `${name}\n\n` +
      `ðŸ‘‰ ${url}\n\n` +
      `#affiliate #addevstudio #deals`;

    switch (network) {
      case "facebook":
        openWindow(
          "https://www.facebook.com/sharer/sharer.php?u=" +
            encodeURIComponent(url)
        );
        break;
      case "whatsapp":
        openWindow(
          "https://wa.me/?text=" +
            encodeURIComponent(baseCaption)
        );
        break;
      case "telegram":
        openWindow(
          "https://t.me/share/url?url=" +
            encodeURIComponent(url) +
            "&text=" +
            encodeURIComponent(baseCaption)
        );
        break;
      case "twitter":
        openWindow(
          "https://twitter.com/intent/tweet?url=" +
            encodeURIComponent(url) +
            "&text=" +
            encodeURIComponent(name)
        );
        break;
      case "linkedin":
        openWindow(
          "https://www.linkedin.com/sharing/share-offsite/?url=" +
            encodeURIComponent(url)
        );
        break;
      case "instagram":
      case "tiktok":
      case "copy":
        try {
          await navigator.clipboard.writeText(baseCaption);
          alert(
            "Caption + link copied! Open " +
              (network === "instagram"
                ? "Instagram"
                : network === "tiktok"
                ? "TikTok"
                : "your social app") +
              " and paste it in your post, bio or story."
          );
        } catch (e) {
          alert("Could not copy automatically. Manually copy this link:\n" + url);
        }
        break;
      default:
        break;
    }
  }

  searchInput.addEventListener("input", renderProducts);
  priceFilter.addEventListener("change", renderProducts);

  modalCloseBtn.addEventListener("click", closeShareModal);
  modalBackdrop.addEventListener("click", (e) => {
    if (e.target === modalBackdrop) closeShareModal();
  });

  modalButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const network = btn.getAttribute("data-network");
      handleShare(network);
    });
  });

  loadProducts();
</script>

</body>
</html>
